(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var l=t(5155),a=t(2115);function n(){let[e,s]=(0,a.useState)({balance:25.5,currency:"USD"}),[t,n]=(0,a.useState)({amount:29.99,nextBillingDate:"2024-02-01",status:"active",planId:"plan_premium"}),[r,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),o=async()=>{try{i(!0),d(null),console.log("Starting billing process...");let t=await fetch("/api/billing/process",{method:"POST",headers:{"Content-Type":"application/json"}}),l=await t.json();if(console.log("Billing result:",l),d(l),l.success){var e;let t=(null===(e=l.results)||void 0===e?void 0:e.filter(e=>"success"===e.status))||[];if(t.length>0){let e=t[0].transaction;e.walletAmount>0&&s(s=>({...s,balance:Math.max(0,s.balance-e.walletAmount)}))}}}catch(e){console.error("Error processing billing:",e),d({success:!1,error:"Network error: ".concat(e instanceof Error?e.message:String(e))})}finally{i(!1)}},m=(()=>{let s=t.amount,l=e.balance;return l>=s?{method:"Wallet Only",walletAmount:s,paypalAmount:0}:l>0?{method:"Wallet + PayPal",walletAmount:l,paypalAmount:s-l}:{method:"PayPal Only",walletAmount:0,paypalAmount:s}})();return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Billing Dashboard"}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Refresh"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Wallet Balance"}),(0,l.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})]}),(0,l.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:["$",e.balance.toFixed(2)]}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Available credits"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Next Billing"}),(0,l.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:"01/02/2024"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["$",t.amount.toFixed(2)," due"]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Subscription"}),(0,l.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-sm font-medium bg-gray-900 text-white rounded",children:t.status})}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:t.planId})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"$ Next Payment Preview"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"How your next subscription payment will be processed"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"Payment Method:"}),(0,l.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-medium bg-blue-100 text-blue-800 rounded-full",children:m.method})]}),m.walletAmount>0&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"From Wallet:"}),(0,l.jsxs)("span",{className:"font-medium text-gray-900",children:["$",m.walletAmount.toFixed(2)]})]}),m.paypalAmount>0&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"From PayPal:"}),(0,l.jsxs)("span",{className:"font-medium text-gray-900",children:["$",m.paypalAmount.toFixed(2)]})]}),(0,l.jsx)("div",{className:"border-t pt-4",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),(0,l.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:["$",t.amount.toFixed(2)]})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Test Billing Process"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Manually trigger the billing process for testing"})]}),(0,l.jsx)("button",{onClick:o,disabled:r,className:"w-full bg-gray-900 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Processing...":"Run Billing Process"}),c&&(0,l.jsxs)("div",{className:"mt-4 p-4 rounded-lg border ".concat(c.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(c.success?"bg-green-500":"bg-red-500"),children:c.success?(0,l.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,l.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,l.jsx)("span",{className:"font-medium ".concat(c.success?"text-green-800":"text-red-800"),children:c.success?"Billing Successful":"Billing Failed"})]}),(0,l.jsx)("p",{className:"text-sm ".concat(c.success?"text-green-700":"text-red-700"),children:c.message||c.error}),c.success&&c.totalProcessed&&(0,l.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,l.jsxs)("p",{children:["Total Processed: ",c.totalProcessed]}),(0,l.jsxs)("p",{children:["Successful: ",c.successful]}),(0,l.jsxs)("p",{children:["Failed: ",c.failed]})]})]})]})]})})}},5020:(e,s,t)=>{Promise.resolve().then(t.bind(t,1057))}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(5020)),_N_E=e.O()}]);